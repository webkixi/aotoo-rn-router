{"version":3,"sources":["index.js"],"names":["Animatable","get","width","height","styles","routerContainer","backgroundColor","routerPage","position","empty","left","animateStyles","enter","leave","enterContent","cnt","from","translateX","to","leaveContent","normalContent","style","focus","myAnimation","RouterPageView","props","isBack","isMultiple","history","saxer","select","selectData","index","path","ctx","children","focusStyle","lastOpen","LastOpen","lastHistoryItem","length","React","PureComponent","RouterClass","state","data","start","multiple","initHistory","keyPrefix","Aotoo","uniqueId","prepaireData","bind","getContent","getMyRealContent","getRealContent","getPageX","that","router","MyRouter","timmer","Date","getTime","OS","Toast","message","info","console","log","addEventListener","History","curTime","duration","close","nextProps","nextState","propsItemStyle","contentData","map","item","ii","title","idf","parent","attr","content","append","ContentData","id","contents","selectContent","forEach","result","call","isValidElement","main","error","alert","historyContent","animContent","baseContentAry","baseContent","_props","curPage","sty","Component","getPrev","prev","pop","Actions","GOTO","ostate","opts","curState","push","BACK","OPEN","CLOSE","prev2","defaultConfig","module","exports","merge","Router","extendAction","rot","dispatch","goto","$goto","goback","open","extend","setConfig"],"mappings":"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","file":"../index.js","sourcesContent":["import { Animated, Button, Platform, BackHandler, StyleSheet, Text, View, Dimensions } from 'react-native'\nimport * as Animatable from 'react-native-animatable'\nconst {width, height} = Dimensions.get('window');\n\nconst styles = {\n  routerContainer: {\n    width: width,\n    height: height,\n    backgroundColor: '#fff',\n  },\n  routerPage: {\n    position: 'absolute',\n  },\n  empty: {\n    position: 'absolute',\n    left: width\n  },\n}\n\nconst animateStyles = {\n  enter: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  },\n\n  leave: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  }\n}\n\n\nfunction enterContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.enter}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 500\n        },\n        to: {\n          translateX: 0\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction leaveContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.leave}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 0\n        },\n        to: {\n          translateX: 500\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction normalContent(cnt, style, focus){\n  const myAnimation = focus ? 'fadeIn' : {\n    from: {\n      translateX: 1000\n    },\n    to: {\n      translateX: 1000\n    }\n  }\n  return (\n    <Animatable.View\n      useNativeDriver={true}\n      style={style}\n      duration={300}\n      animation={'fadeIn'}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nclass RouterPageView extends React.PureComponent {\n  render(){\n    const focus = this.props.focus()\n    const {isBack, isMultiple, history, saxer, select, selectData, index, path, ctx, children} = this.props\n    let focusStyle = focus ? styles.routerPage : styles.empty\n    if (isMultiple) {\n      if (isBack) {\n        // 关闭open的页面\n        const lastOpen = ctx.saxer.get().LastOpen\n        if (lastOpen && (index == lastOpen.select || path == lastOpen.select)){\n          return leaveContent(children)\n        }\n      }\n      else {\n        // open 一个页面\n        const lastHistoryItem = history[history.length-1]\n        if (index == lastHistoryItem.select||path == lastHistoryItem.select){\n          return enterContent(children)\n        }\n      }\n    }\n    \n    return normalContent(children, focusStyle, focus)\n  }\n}\n\nclass RouterClass extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: this.props.selectData || {},\n      multiple: false,\n      isBack: false\n    }\n\n    const initHistory = {\n      select: this.state.select,\n      selectData: this.state.selectData,\n      multiple: false,\n    }\n    this.keyPrefix = Aotoo.uniqueId('router_')\n    this.state.history = [initHistory]\n    this.prepaireData = this.prepaireData.bind(this)\n    this.getContent = this.getContent.bind(this)\n    this.getMyRealContent = this.getMyRealContent.bind(this)\n    this.getRealContent = this.getRealContent.bind(this)\n    this.getPageX = this.getPageX.bind(this)\n  }\n\n  componentWillMount() {\n    const that = this\n    const router = this.saxer.get().MyRouter||{}\n    let timmer = new Date().getTime()\n    this.prepaireData(this.state)\n    if (Platform.OS  == 'android') {\n      if (typeof Toast == 'undefined') {\n        var Toast = {\n          message: function(info){\n            console.log(info);\n          }\n        }\n      }\n      BackHandler.addEventListener('hardwareBackPress', function(){\n        const history = that.saxer.get().History\n        if (history.length<2) {\n          Toast.message('再按一次退出')\n          const curTime = new Date().getTime()\n          if (curTime - timmer < (that.props.duration||1500)) {\n            return false\n          } else {\n            timmer = curTime\n            return true\n          }\n        } else {\n          router.close()\n          return true\n        }\n      })\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState){\n    this.prepaireData(nextState)\n  }\n\n  prepaireData(){\n    const that = this\n    const props = this.props\n    const state = this.state\n    var   propsItemStyle = props.style ? props.style : {}\n\n    const contentData = state.data.map( (item, ii) => {\n      // 准备内容数据\n      return {\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        content: item.content,\n        style: item.style\n      }\n    })\n\n    this.saxer.append({\n      ContentData: contentData\n    })\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    let selectContent\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content\n        }\n      } else {\n        if (item.index == select || item.path == select) {\n          selectContent = item.content\n        }\n      }\n    })\n    return selectContent\n  }\n\n  getMyRealContent(id, data){\n    try {\n      let   content = this.getContent(id)\n      // const router = this.props.router||{}\n      const router = this.saxer.get().MyRouter||{}\n      const ctx = {\n        router: router\n      }\n\n      if (typeof content == 'function') {\n        const result = content.call(ctx, data||this.state.selectData)\n        if (React.isValidElement(result)) return result\n        content = result\n      }\n\n      if (typeof content == 'object') {\n        if (content.enter) {\n          if (typeof content.enter == 'function') return content.enter.call(ctx, data||this.state.selectData)\n        } else {\n          if (content.main) {\n            return content.main.call(ctx, data||this.state.selectData)\n          }\n        }\n      }\n      if ( React.isValidElement(content)) return content\n      else {\n        throw '没有返回jsx对象'\n      }\n    } catch (error) {\n      alert('路由页必须返回JSX')\n    }\n  }\n\n  getRealContent(id, data){\n    if (!id) id = this.state.select\n    let historyContent = this.saxer.data['RealContent']\n    if (!historyContent) {\n      historyContent = {}\n      this.saxer.data['RealContent'] = {}\n    }\n    if (historyContent[id]) {\n      return historyContent[id]\n    } else {\n      const content = this.getMyRealContent(id, data)\n      this.saxer.data['RealContent'][id] = content\n      return content\n    }\n  }\n  \n  // getPage(){\n  //   const isBack = this.state.isBack\n  //   const isMultiple = this.state.multiple\n  //   const history = this.state.history\n  //   const saxer = this.saxer\n  //   const select = this.state.select\n  //   const selectData = this.state.selectData\n  //   var animContent = ''\n  //   var baseContentAry = []\n  //   var baseContent = []\n  //   var contents = []\n  //   const keyPrefix = this.keyPrefix\n\n  //   if (isMultiple) {\n  //     // const reverseHistory = Aotoo.cloneDeep(history).reverse()\n  //     const tmpHistory = JSON.parse(JSON.stringify(history))\n  //     const reverseHistory = tmpHistory.reverse()\n  //     var count = 0\n  //     reverseHistory.forEach( (item, ii) => {\n  //       if (count == 0) {\n  //         if (ii==0) {\n  //           if (isBack) {\n  //             if (item.multiple) baseContentAry.unshift(item)\n  //             else {\n  //               baseContentAry.unshift(item)\n  //               count = 1\n  //             }\n  //           }\n  //         } else {\n  //           if (item.multiple) {\n  //             baseContentAry.unshift(item)\n  //           } else {\n  //             baseContentAry.unshift(item)\n  //             count = 1\n  //           }\n  //         }\n  //       }\n  //     })\n\n  //     if (!isBack) {\n  //       animContent = this.enterContent()\n  //     } else {\n  //       animContent = this.leaveContent()\n  //     }\n\n  //     baseContent = baseContentAry.map( (item, ii) => {\n  //       const _key = keyPrefix+'_'+ii\n  //       const originJsx = this.getRealContent(item.select, item.selectData)\n  //       return React.cloneElement(originJsx, {key: _key})\n  //     })\n\n  //     baseContent.push(React.cloneElement(animContent, {key: keyPrefix+'_'+'animate'}))\n  //     return baseContent\n  //   }\n  //   else {\n  //     return this.getRealContent()\n  //   }\n  // }\n\n  getPageX(){\n    const isBack = this.state.isBack\n    const isMultiple = this.state.multiple\n    const history = this.state.history\n    const saxer = this.saxer\n    const select = this.state.select\n    const selectData = this.state.selectData\n    var animContent = ''\n    var baseContentAry = []\n    var baseContent = []\n\n    const keyPrefix = this.keyPrefix\n    const contents = this.saxer.get().ContentData\n    const _props = {\n      isBack, isMultiple, history, saxer, select, selectData\n    }\n\n    // 同步history到saxer中\n    this.saxer.append({\n      History: this.state.history\n    })\n\n    return contents.map( (item, ii) => \n      <RouterPageView \n        key={keyPrefix+'_'+ii} \n        ctx={this}\n        focus={ ()=>item.index==select||item.path==select }\n        index={item.index}\n        path={item.path}\n        {..._props}\n      >\n        {this.getRealContent(item.path)}\n      </RouterPageView>\n    )\n  }\n\n  render(){\n    const curPage = this.getPageX()\n    const sty = this.props.style || styles.routerContainer\n    return (\n      <View style={sty}>\n        {curPage}\n        {this.props.children}\n      </View>\n    )\n  }\n}\n\nfunction getPrev(state, history){\n  if (history.length) {\n    var prev = history[history.length-1]\n    if (state.select == prev.select) {\n      history.pop()\n      return getPrev(state, history)\n    } else {\n      return prev\n    }\n  }\n}\n\nconst Actions = {\n  GOTO: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = false\n    state.select = opts.select\n    state.selectData = opts.selectData\n    state.history.push({\n      select: opts.select,\n      selectData: opts.selectData,\n      multiple: false\n    })\n    return state\n  },\n\n  BACK: function(ostate, opts={}){\n    let state = this.curState\n    state.isBack = true\n    state.multiple = false\n    const prev = getPrev(state, state.history)\n    if (prev) {\n      state.select = prev.select\n      state.selectData = opts.selectData || prev.selectData\n    } else {\n      state.select = ostate.select\n      state.selectData = ostate.selectData\n    }\n    return state\n  },\n\n  OPEN: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = true\n    var prev = state.history[state.history.length-1]\n    if (state.select != opts.select) {\n      state.select = prev.select\n      state.selectData = prev.selectData\n      state.history.push({\n        select: opts.select,\n        selectData: opts.selectData,\n        multiple: true\n      })\n    }\n    return state\n  },\n\n  CLOSE: function(ostate, opts={}, ctx){\n    var state = this.curState\n    state.isBack = true\n    state.multiple = true\n    var prev = state.history.pop()\n    if (prev) {\n      if (prev.multiple) {\n        ctx.saxer.append({\n          LastOpen: prev\n        })\n        const prev2 = state.history[state.history.length-1]\n        state.select = prev2.select\n        state.selectData = opts.selectData || prev2.selectData\n      } else {\n        state.multiple = false\n        state.history.push(prev)\n        prev = getPrev(state, state.history)\n        if (prev) {\n          state.select = prev.select\n          state.selectData = opts.selectData || prev.selectData\n        } else {\n          state.select = ostate.select\n          state.selectData = ostate.selectData\n        }\n      }\n    }\n    return state\n  }\n}\n\nvar defaultConfig = {\n  props: {\n    data: [],\n    select: 0,\n    selectData: {},\n    router: {},\n    duration: 1200\n  }\n}\nmodule.exports = function router(opts={}, sty){\n  opts = Aotoo.merge({}, defaultConfig, opts)\n  // if (!opts.props) opts.props = {}\n  const Router = Aotoo(RouterClass, Actions)\n  const extendAction = {\n    \"$goto\": function(rot, data){\n      this.dispatch('GOTO', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    goto: function(rot, data){\n      this.$goto(rot, data)\n    }.bind(Router),\n\n    goback: function(data){\n      this.dispatch('BACK', {\n        selectData: data\n      })\n    }.bind(Router),\n\n    open: function(rot, data){\n      this.dispatch('OPEN', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    close: function(data){\n      this.dispatch('CLOSE', {\n        selectData: data\n      })\n    }.bind(Router),\n  }\n  Router.extend(extendAction)\n  Router.saxer.append({\n    'MyRouter': extendAction\n  })\n  // opts.props.router = extendAction\n  Router.setConfig(opts)\n  return Router\n}\n\n// module.exports = require('aotoo-rn-router')"]}