{"version":3,"sources":["index.js"],"names":["Animatable","get","width","height","styles","routerContainer","backgroundColor","routerPage","position","empty","left","animateStyles","enter","leave","enterContent","cnt","from","translateX","to","leaveContent","normalContent","style","focus","myAnimation","RouterPageView","props","isBack","isMultiple","history","saxer","select","selectData","index","path","ctx","children","focusStyle","lastOpen","LastOpen","lastHistoryItem","length","React","PureComponent","RouterClass","state","data","start","multiple","initHistory","keyPrefix","Aotoo","uniqueId","prepaireData","bind","getContent","getMyRealContent","getRealContent","getPageX","that","timmer","OS","addEventListener","History","curTime","Date","getTime","router","close","nextProps","nextState","propsItemStyle","contentData","map","item","ii","title","idf","parent","attr","content","append","ContentData","id","contents","selectContent","forEach","result","call","isValidElement","main","error","alert","historyContent","animContent","baseContentAry","baseContent","_props","curPage","sty","Component","getPrev","prev","pop","Actions","GOTO","ostate","opts","curState","push","BACK","OPEN","CLOSE","prev2","module","exports","Router","extendAction","rot","dispatch","goto","$goto","goback","open","extend","setConfig"],"mappings":";;;;;;;;AAaA;;AACA;;IAAYA,U;;;;;;;;+eAdZ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;sBAIwB,wBAAWC,GAAX,CAAe,QAAf,C;IAAjBC,K,mBAAAA,K;IAAOC,M,mBAAAA,M;;AAEd,IAAMC,SAAS;AACbC,mBAAiB;AACfH,WAAOA,KADQ;AAEfC,YAAQA,MAFO;AAGfG,qBAAiB;AAHF,GADJ;AAMbC,cAAY;AACVC,cAAU;AADA,GANC;AASbC,SAAO;AACLD,cAAU,UADL;AAELE,UAAMR;AAFD;AATM,CAAf;;AAeA,IAAMS,gBAAgB;AACpBC,SAAO;AACLV,WAAOA,KADF;AAELC,YAAQA,MAFH;AAGLK,cAAU;AAHL,GADa;;AAOpBK,SAAO;AACLX,WAAOA,KADF;AAELC,YAAQA,MAFH;AAGLK,cAAU;AAHL;AAPa,CAAtB;;AAeA,SAASM,YAAT,CAAsBC,GAAtB,EAA0B;AACxB,SACE;AAAC,cAAD,CAAY,IAAZ;AAAA;AACE,aAAOJ,cAAcC,KADvB;AAEE,uBAAiB,IAFnB;AAGE,gBAAU,GAHZ;AAIE,iBAAW;AACTI,cAAM;AACJC,sBAAY;AADR,SADG;AAITC,YAAI;AACFD,sBAAY;AADV;AAJK;AAJb;AAaGF;AAbH,GADF;AAiBD;;AAED,SAASI,YAAT,CAAsBJ,GAAtB,EAA0B;AACxB,SACE;AAAC,cAAD,CAAY,IAAZ;AAAA;AACE,aAAOJ,cAAcE,KADvB;AAEE,uBAAiB,IAFnB;AAGE,gBAAU,GAHZ;AAIE,iBAAW;AACTG,cAAM;AACJC,sBAAY;AADR,SADG;AAITC,YAAI;AACFD,sBAAY;AADV;AAJK;AAJb;AAaGF;AAbH,GADF;AAiBD;;AAED,SAASK,aAAT,CAAuBL,GAAvB,EAA4BM,KAA5B,EAAmCC,KAAnC,EAAyC;AACvC,MAAMC,cAAcD,QAAQ,QAAR,GAAmB;AACrCN,UAAM;AACJC,kBAAY;AADR,KAD+B;AAIrCC,QAAI;AACFD,kBAAY;AADV;AAJiC,GAAvC;AAQA,SACE;AAAC,cAAD,CAAY,IAAZ;AAAA;AACE,uBAAiB,IADnB;AAEE,aAAOI,KAFT;AAGE,gBAAU,GAHZ;AAIE,iBAAW;AAJb;AAMGN;AANH,GADF;AAUD;;IAEKS,c;;;;;;;;;;;6BACI;AACN,UAAMF,QAAQ,KAAKG,KAAL,CAAWH,KAAX,EAAd;AADM,oBAEuF,KAAKG,KAF5F;AAAA,UAECC,MAFD,WAECA,MAFD;AAAA,UAESC,UAFT,WAESA,UAFT;AAAA,UAEqBC,OAFrB,WAEqBA,OAFrB;AAAA,UAE8BC,KAF9B,WAE8BA,KAF9B;AAAA,UAEqCC,MAFrC,WAEqCA,MAFrC;AAAA,UAE6CC,UAF7C,WAE6CA,UAF7C;AAAA,UAEyDC,KAFzD,WAEyDA,KAFzD;AAAA,UAEgEC,IAFhE,WAEgEA,IAFhE;AAAA,UAEsEC,GAFtE,WAEsEA,GAFtE;AAAA,UAE2EC,QAF3E,WAE2EA,QAF3E;;AAGN,UAAIC,aAAad,QAAQlB,OAAOG,UAAf,GAA4BH,OAAOK,KAApD;AACA,UAAIkB,UAAJ,EAAgB;AACd,YAAID,MAAJ,EAAY;AACV;AACA,cAAMW,WAAWH,IAAIL,KAAJ,CAAU5B,GAAV,GAAgBqC,QAAjC;AACA,cAAIN,SAASK,SAASP,MAAlB,IAA4BG,QAAQI,SAASP,MAAjD,EAAwD;AACtD,mBAAOX,aAAagB,QAAb,CAAP;AACD;AACF,SAND,MAOK;AACH;AACA,cAAMI,kBAAkBX,QAAQA,QAAQY,MAAR,GAAe,CAAvB,CAAxB;AACA,cAAIR,SAASO,gBAAgBT,MAAzB,IAAiCG,QAAQM,gBAAgBT,MAA7D,EAAoE;AAClE,mBAAOhB,aAAaqB,QAAb,CAAP;AACD;AACF;AACF;;AAED,aAAOf,cAAce,QAAd,EAAwBC,UAAxB,EAAoCd,KAApC,CAAP;AACD;;;;EAvB0BmB,MAAMC,a;;IA0B7BC,W;;;AACJ,uBAAYlB,KAAZ,EAAkB;AAAA;;AAAA,2HACVA,KADU;;AAEhB,WAAKmB,KAAL,GAAa;AACXC,YAAM,OAAKpB,KAAL,CAAWoB,IAAX,IAAiB,EADZ;AAEXf,cAAQ,OAAKL,KAAL,CAAWK,MAAX,IAAmB,OAAKL,KAAL,CAAWqB,KAA9B,IAAqC,CAFlC;AAGXf,kBAAY,OAAKN,KAAL,CAAWM,UAAX,IAAyB,EAH1B;AAIXgB,gBAAU,KAJC;AAKXrB,cAAQ;AALG,KAAb;;AAQA,QAAMsB,cAAc;AAClBlB,cAAQ,OAAKc,KAAL,CAAWd,MADD;AAElBC,kBAAY,OAAKa,KAAL,CAAWb,UAFL;AAGlBgB,gBAAU;AAHQ,KAApB;AAKA,WAAKE,SAAL,GAAiBC,MAAMC,QAAN,CAAe,SAAf,CAAjB;AACA,WAAKP,KAAL,CAAWhB,OAAX,GAAqB,CAACoB,WAAD,CAArB;AACA,WAAKI,YAAL,GAAoB,OAAKA,YAAL,CAAkBC,IAAlB,QAApB;AACA,WAAKC,UAAL,GAAkB,OAAKA,UAAL,CAAgBD,IAAhB,QAAlB;AACA,WAAKE,gBAAL,GAAwB,OAAKA,gBAAL,CAAsBF,IAAtB,QAAxB;AACA,WAAKG,cAAL,GAAsB,OAAKA,cAAL,CAAoBH,IAApB,QAAtB;AACA,WAAKI,QAAL,GAAgB,OAAKA,QAAL,CAAcJ,IAAd,QAAhB;AArBgB;AAsBjB;;;;yCAEoB;AACnB,UAAMK,OAAO,IAAb;AACA,UAAIC,eAAJ;AACA,WAAKP,YAAL,CAAkB,KAAKR,KAAvB;AACA,UAAI,sBAASgB,EAAT,IAAgB,SAApB,EAA+B;AAC7B,iCAAYC,gBAAZ,CAA6B,mBAA7B,EAAkD,YAAU;AAC1D,cAAMjC,UAAU8B,KAAK7B,KAAL,CAAW5B,GAAX,GAAiB6D,OAAjC;AACA,cAAIH,MAAJ,EAAY;AACV,gBAAMI,UAAU,IAAIC,IAAJ,GAAWC,OAAX,EAAhB;AACA,gBAAIF,UAAUJ,MAAV,GAAmB,IAAvB,EAA6B;AAC3B,qBAAO,KAAP;AACD,aAFD,MAEO;AACLA,uBAASI,OAAT;AACAL,mBAAKjC,KAAL,CAAWyC,MAAX,CAAkBC,KAAlB;AACA,qBAAO,IAAP;AACD;AACF,WATD,MASO;AACLR,qBAAS,IAAIK,IAAJ,GAAWC,OAAX,EAAT;AACD;AACD,iBAAO,IAAP;AACD,SAfD;AAgBD;AACF;;;wCAEmBG,S,EAAWC,S,EAAU;AACvC,WAAKjB,YAAL,CAAkBiB,SAAlB;AACD;;;mCAEa;AACZ,UAAMX,OAAO,IAAb;AACA,UAAMjC,QAAQ,KAAKA,KAAnB;AACA,UAAMmB,QAAQ,KAAKA,KAAnB;AACA,UAAM0B,iBAAiB7C,MAAMJ,KAAN,GAAcI,MAAMJ,KAApB,GAA4B,EAAnD;;AAEA,UAAMkD,cAAc3B,MAAMC,IAAN,CAAW2B,GAAX,CAAgB,UAACC,IAAD,EAAOC,EAAP,EAAc;AAChD;AACA,eAAO;AACL1C,iBAAO0C,EADF;AAELzC,gBAAMwC,KAAKxC,IAFN;AAGL0C,iBAAOF,KAAKE,KAHP;AAILC,eAAKH,KAAKG,GAJL;AAKLC,kBAAQJ,KAAKI,MALR;AAMLC,gBAAML,KAAKK,IANN;AAOLC,mBAASN,KAAKM,OAPT;AAQL1D,iBAAOoD,KAAKpD;AARP,SAAP;AAUD,OAZmB,CAApB;;AAcA,WAAKQ,KAAL,CAAWmD,MAAX,CAAkB;AAChBC,qBAAaV;AADG,OAAlB;AAGD;;;+BAEUW,E,EAAG;AACZ,UAAMpD,SAAS,KAAKc,KAAL,CAAWd,MAA1B;AACA,UAAMqD,WAAW,KAAKtD,KAAL,CAAW5B,GAAX,GAAiBgF,WAAlC;AACA,UAAIG,sBAAJ;;AAEAD,eAASE,OAAT,CAAkB,gBAAQ;AACxB,YAAMH,MAAIA,MAAI,CAAd,EAAkB;AAChB,cAAIT,KAAKxC,IAAL,IAAaiD,EAAb,IAAmBT,KAAKzC,KAAL,IAAckD,EAArC,EAAyC;AACvCE,4BAAgBX,KAAKM,OAArB;AACD;AACF,SAJD,MAIO;AACL,cAAIN,KAAKzC,KAAL,IAAcF,MAAd,IAAwB2C,KAAKxC,IAAL,IAAaH,MAAzC,EAAiD;AAC/CsD,4BAAgBX,KAAKM,OAArB;AACD;AACF;AACF,OAVD;AAWA,aAAOK,aAAP;AACD;;;qCAEgBF,E,EAAIrC,I,EAAK;AACxB,UAAI;AACF,YAAMkC,UAAU,KAAKzB,UAAL,CAAgB4B,EAAhB,CAAhB;AACA,YAAMhB,SAAS,KAAKzC,KAAL,CAAWyC,MAAX,IAAmB,EAAlC;AACA,YAAMhC,MAAM;AACVgC,kBAAQA;AADE,SAAZ;;AAIA,YAAI,OAAOa,OAAP,IAAkB,UAAtB,EAAkC;AAChC,cAAMO,SAASP,QAAQQ,IAAR,CAAarD,GAAb,EAAkBW,QAAM,KAAKD,KAAL,CAAWb,UAAnC,CAAf;AACA,cAAIU,MAAM+C,cAAN,CAAqBF,MAArB,CAAJ,EAAkC,OAAOA,MAAP;AAClCP,oBAAUO,MAAV;AACD;;AAED,YAAI,QAAOP,OAAP,yCAAOA,OAAP,MAAkB,QAAtB,EAAgC;AAC9B,cAAIA,QAAQnE,KAAZ,EAAmB;AACjB,gBAAI,OAAOmE,QAAQnE,KAAf,IAAwB,UAA5B,EAAwC,OAAOmE,QAAQnE,KAAR,CAAc2E,IAAd,CAAmBrD,GAAnB,EAAwBW,QAAM,KAAKD,KAAL,CAAWb,UAAzC,CAAP;AACzC,WAFD,MAEO;AACL,gBAAIgD,QAAQU,IAAZ,EAAkB;AAChB,qBAAOV,QAAQU,IAAR,CAAaF,IAAb,CAAkBrD,GAAlB,EAAuBW,QAAM,KAAKD,KAAL,CAAWb,UAAxC,CAAP;AACD;AACF;AACF;AACD,YAAKU,MAAM+C,cAAN,CAAqBT,OAArB,CAAL,EAAoC,OAAOA,OAAP,CAApC,KACK;AACH,gBAAM,WAAN;AACD;AACF,OA1BD,CA0BE,OAAOW,KAAP,EAAc;AACdC,cAAM,YAAN;AACD;AACF;;;mCAEcT,E,EAAIrC,I,EAAK;AACtB,UAAI,CAACqC,EAAL,EAASA,KAAK,KAAKtC,KAAL,CAAWd,MAAhB;AACT,UAAI8D,iBAAiB,KAAK/D,KAAL,CAAWgB,IAAX,CAAgB,aAAhB,CAArB;AACA,UAAI,CAAC+C,cAAL,EAAqB;AACnBA,yBAAiB,EAAjB;AACA,aAAK/D,KAAL,CAAWgB,IAAX,CAAgB,aAAhB,IAAiC,EAAjC;AACD;AACD,UAAI+C,eAAeV,EAAf,CAAJ,EAAwB;AACtB,eAAOU,eAAeV,EAAf,CAAP;AACD,OAFD,MAEO;AACL,YAAMH,UAAU,KAAKxB,gBAAL,CAAsB2B,EAAtB,EAA0BrC,IAA1B,CAAhB;AACA,aAAKhB,KAAL,CAAWgB,IAAX,CAAgB,aAAhB,EAA+BqC,EAA/B,IAAqCH,OAArC;AACA,eAAOA,OAAP;AACD;AACF;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;+BAEU;AAAA;;AACR,UAAMrD,SAAS,KAAKkB,KAAL,CAAWlB,MAA1B;AACA,UAAMC,aAAa,KAAKiB,KAAL,CAAWG,QAA9B;AACA,UAAMnB,UAAU,KAAKgB,KAAL,CAAWhB,OAA3B;AACA,UAAMC,QAAQ,KAAKA,KAAnB;AACA,UAAMC,SAAS,KAAKc,KAAL,CAAWd,MAA1B;AACA,UAAMC,aAAa,KAAKa,KAAL,CAAWb,UAA9B;AACA,UAAI8D,cAAc,EAAlB;AACA,UAAIC,iBAAiB,EAArB;AACA,UAAIC,cAAc,EAAlB;;AAEA,UAAM9C,YAAY,KAAKA,SAAvB;AACA,UAAMkC,WAAW,KAAKtD,KAAL,CAAW5B,GAAX,GAAiBgF,WAAlC;AACA,UAAMe,SAAS;AACbtE,sBADa,EACLC,sBADK,EACOC,gBADP,EACgBC,YADhB,EACuBC,cADvB,EAC+BC;;AAG9C;AAJe,OAAf,CAKA,KAAKF,KAAL,CAAWmD,MAAX,CAAkB;AAChBlB,iBAAS,KAAKlB,KAAL,CAAWhB;AADJ,OAAlB;;AAIA,aAAOuD,SAASX,GAAT,CAAc,UAACC,IAAD,EAAOC,EAAP;AAAA,eACnB;AAAC,wBAAD;AAAA;AACE,iBAAKzB,YAAU,GAAV,GAAcyB,EADrB;AAEE,uBAFF;AAGE,mBAAQ;AAAA,qBAAID,KAAKzC,KAAL,IAAYF,MAAZ,IAAoB2C,KAAKxC,IAAL,IAAWH,MAAnC;AAAA,aAHV;AAIE,mBAAO2C,KAAKzC,KAJd;AAKE,kBAAMyC,KAAKxC;AALb,aAMM+D,MANN;AAQG,iBAAKxC,cAAL,CAAoBiB,KAAKxC,IAAzB;AARH,SADmB;AAAA,OAAd,CAAP;AAYD;;;6BAEO;AACN,UAAMgE,UAAU,KAAKxC,QAAL,EAAhB;AACA,UAAMyC,MAAM,KAAKzE,KAAL,CAAWJ,KAAX,IAAoBjB,OAAOC,eAAvC;AACA,aACE;AAAA;AAAA,UAAM,OAAO6F,GAAb;AACGD;AADH,OADF;AAKD;;;;EAxPuBxD,MAAM0D,S;;AA2PhC,SAASC,OAAT,CAAiBxD,KAAjB,EAAwBhB,OAAxB,EAAgC;AAC9B,MAAIA,QAAQY,MAAZ,EAAoB;AAClB,QAAI6D,OAAOzE,QAAQA,QAAQY,MAAR,GAAe,CAAvB,CAAX;AACA,QAAII,MAAMd,MAAN,IAAgBuE,KAAKvE,MAAzB,EAAiC;AAC/BF,cAAQ0E,GAAR;AACA,aAAOF,QAAQxD,KAAR,EAAehB,OAAf,CAAP;AACD,KAHD,MAGO;AACL,aAAOyE,IAAP;AACD;AACF;AACF;;AAED,IAAME,UAAU;AACdC,QAAM,cAASC,MAAT,EAAyB;AAAA,QAARC,IAAQ,uEAAH,EAAG;;AAC7B,QAAI9D,QAAQ,KAAK+D,QAAjB;AACA/D,UAAMlB,MAAN,GAAe,KAAf;AACAkB,UAAMG,QAAN,GAAiB,KAAjB;AACAH,UAAMd,MAAN,GAAe4E,KAAK5E,MAApB;AACAc,UAAMb,UAAN,GAAmB2E,KAAK3E,UAAxB;AACAa,UAAMhB,OAAN,CAAcgF,IAAd,CAAmB;AACjB9E,cAAQ4E,KAAK5E,MADI;AAEjBC,kBAAY2E,KAAK3E,UAFA;AAGjBgB,gBAAU;AAHO,KAAnB;AAKA,WAAOH,KAAP;AACD,GAba;;AAediE,QAAM,cAASJ,MAAT,EAAyB;AAAA,QAARC,IAAQ,uEAAH,EAAG;;AAC7B,QAAI9D,QAAQ,KAAK+D,QAAjB;AACA/D,UAAMlB,MAAN,GAAe,IAAf;AACAkB,UAAMG,QAAN,GAAiB,KAAjB;AACA,QAAMsD,OAAOD,QAAQxD,KAAR,EAAeA,MAAMhB,OAArB,CAAb;AACA,QAAIyE,IAAJ,EAAU;AACRzD,YAAMd,MAAN,GAAeuE,KAAKvE,MAApB;AACAc,YAAMb,UAAN,GAAmB2E,KAAK3E,UAAL,IAAmBsE,KAAKtE,UAA3C;AACD,KAHD,MAGO;AACLa,YAAMd,MAAN,GAAe2E,OAAO3E,MAAtB;AACAc,YAAMb,UAAN,GAAmB0E,OAAO1E,UAA1B;AACD;AACD,WAAOa,KAAP;AACD,GA5Ba;;AA8BdkE,QAAM,cAASL,MAAT,EAAyB;AAAA,QAARC,IAAQ,uEAAH,EAAG;;AAC7B,QAAI9D,QAAQ,KAAK+D,QAAjB;AACA/D,UAAMlB,MAAN,GAAe,KAAf;AACAkB,UAAMG,QAAN,GAAiB,IAAjB;AACA,QAAIsD,OAAOzD,MAAMhB,OAAN,CAAcgB,MAAMhB,OAAN,CAAcY,MAAd,GAAqB,CAAnC,CAAX;AACA,QAAII,MAAMd,MAAN,IAAgB4E,KAAK5E,MAAzB,EAAiC;AAC/Bc,YAAMd,MAAN,GAAeuE,KAAKvE,MAApB;AACAc,YAAMb,UAAN,GAAmBsE,KAAKtE,UAAxB;AACAa,YAAMhB,OAAN,CAAcgF,IAAd,CAAmB;AACjB9E,gBAAQ4E,KAAK5E,MADI;AAEjBC,oBAAY2E,KAAK3E,UAFA;AAGjBgB,kBAAU;AAHO,OAAnB;AAKD;AACD,WAAOH,KAAP;AACD,GA7Ca;;AA+CdmE,SAAO,eAASN,MAAT,EAA8B;AAAA,QAAbC,IAAa,uEAAR,EAAQ;AAAA,QAAJxE,GAAI;;AACnC,QAAIU,QAAQ,KAAK+D,QAAjB;AACA/D,UAAMlB,MAAN,GAAe,IAAf;AACAkB,UAAMG,QAAN,GAAiB,IAAjB;AACA,QAAIsD,OAAOzD,MAAMhB,OAAN,CAAc0E,GAAd,EAAX;AACA,QAAID,IAAJ,EAAU;AACR,UAAIA,KAAKtD,QAAT,EAAmB;AACjBb,YAAIL,KAAJ,CAAUmD,MAAV,CAAiB;AACf1C,oBAAU+D;AADK,SAAjB;AAGA,YAAMW,QAAQpE,MAAMhB,OAAN,CAAcgB,MAAMhB,OAAN,CAAcY,MAAd,GAAqB,CAAnC,CAAd;AACAI,cAAMd,MAAN,GAAekF,MAAMlF,MAArB;AACAc,cAAMb,UAAN,GAAmB2E,KAAK3E,UAAL,IAAmBiF,MAAMjF,UAA5C;AACD,OAPD,MAOO;AACLa,cAAMG,QAAN,GAAiB,KAAjB;AACAH,cAAMhB,OAAN,CAAcgF,IAAd,CAAmBP,IAAnB;AACAA,eAAOD,QAAQxD,KAAR,EAAeA,MAAMhB,OAArB,CAAP;AACA,YAAIyE,IAAJ,EAAU;AACRzD,gBAAMd,MAAN,GAAeuE,KAAKvE,MAApB;AACAc,gBAAMb,UAAN,GAAmB2E,KAAK3E,UAAL,IAAmBsE,KAAKtE,UAA3C;AACD,SAHD,MAGO;AACLa,gBAAMd,MAAN,GAAe2E,OAAO3E,MAAtB;AACAc,gBAAMb,UAAN,GAAmB0E,OAAO1E,UAA1B;AACD;AACF;AACF;AACD,WAAOa,KAAP;AACD;;AAGH;AACA;AACA;AACA;AACA;AACA;;AAlFgB,CAAhB,CAoFAqE,OAAOC,OAAP,GAAiB,SAAShD,MAAT,GAA6B;AAAA,MAAbwC,IAAa,uEAAR,EAAQ;AAAA,MAAJR,GAAI;;AAC5C,MAAI,CAACQ,KAAKjF,KAAV,EAAiBiF,KAAKjF,KAAL,GAAa,EAAb;AACjB,MAAM0F,SAASjE,MAAMP,WAAN,EAAmB4D,OAAnB,CAAf;AACA,MAAMa,eAAe;AACnB,aAAS,UAASC,GAAT,EAAcxE,IAAd,EAAmB;AAC1B,WAAKyE,QAAL,CAAc,MAAd,EAAsB;AACpBxF,gBAAQuF,GADY;AAEpBtF,oBAAYc;AAFQ,OAAtB;AAID,KALQ,CAKPQ,IALO,CAKF8D,MALE,CADU;;AAQnBI,UAAM,UAASF,GAAT,EAAcxE,IAAd,EAAmB;AACvB,WAAK2E,KAAL,CAAWH,GAAX,EAAgBxE,IAAhB;AACD,KAFK,CAEJQ,IAFI,CAEC8D,MAFD,CARa;;AAYnBM,YAAQ,UAAS5E,IAAT,EAAc;AACpB,WAAKyE,QAAL,CAAc,MAAd,EAAsB;AACpBvF,oBAAYc;AADQ,OAAtB;AAGD,KAJO,CAINQ,IAJM,CAID8D,MAJC,CAZW;;AAkBnBO,UAAM,UAASL,GAAT,EAAcxE,IAAd,EAAmB;AACvB,WAAKyE,QAAL,CAAc,MAAd,EAAsB;AACpBxF,gBAAQuF,GADY;AAEpBtF,oBAAYc;AAFQ,OAAtB;AAID,KALK,CAKJQ,IALI,CAKC8D,MALD,CAlBa;;AAyBnBhD,WAAO,UAAStB,IAAT,EAAc;AACnB,WAAKyE,QAAL,CAAc,OAAd,EAAuB;AACrBvF,oBAAYc;AADS,OAAvB;AAGD,KAJM,CAILQ,IAJK,CAIA8D,MAJA;AAzBY,GAArB;AA+BAA,SAAOQ,MAAP,CAAcP,YAAd;AACAV,OAAKjF,KAAL,CAAWyC,MAAX,GAAoBkD,YAApB;AACAD,SAAOS,SAAP,CAAiBlB,IAAjB;AACA,SAAOS,MAAP;AACD,CAtCD","file":"../index.js","sourcesContent":["// const routerData = [\n//   {title: 'xxx', path: 'xxx', content: 'bbb', id: 'root' style:{}},\n//   {title: 'xxx', path: 'xxx', content: 'bbb', parent: 'root'},\n//   {title: 'xxx', path: 'xxx', content: 'bbb', parent: 'root'},\n\n//   {title: 'xxx', path: 'xxx', content: 'bbb', parent: 'root'},\n// ]\n\n// router({\n//   data: routerData,\n//   style: {}\n// })\n\nimport { Animated, Button, Platform, BackHandler, StyleSheet, Text, View, Dimensions } from 'react-native'\nimport * as Animatable from 'react-native-animatable'\nconst {width, height} = Dimensions.get('window');\n\nconst styles = {\n  routerContainer: {\n    width: width,\n    height: height,\n    backgroundColor: '#fff',\n  },\n  routerPage: {\n    position: 'absolute',\n  },\n  empty: {\n    position: 'absolute',\n    left: width\n  },\n}\n\nconst animateStyles = {\n  enter: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  },\n\n  leave: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  }\n}\n\n\nfunction enterContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.enter}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 500\n        },\n        to: {\n          translateX: 0\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction leaveContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.leave}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 0\n        },\n        to: {\n          translateX: 500\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction normalContent(cnt, style, focus){\n  const myAnimation = focus ? 'fadeIn' : {\n    from: {\n      translateX: 1000\n    },\n    to: {\n      translateX: 1000\n    }\n  }\n  return (\n    <Animatable.View\n      useNativeDriver={true}\n      style={style}\n      duration={300}\n      animation={'fadeIn'}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nclass RouterPageView extends React.PureComponent {\n  render(){\n    const focus = this.props.focus()\n    const {isBack, isMultiple, history, saxer, select, selectData, index, path, ctx, children} = this.props\n    let focusStyle = focus ? styles.routerPage : styles.empty\n    if (isMultiple) {\n      if (isBack) {\n        // 关闭open的页面\n        const lastOpen = ctx.saxer.get().LastOpen\n        if (index == lastOpen.select || path == lastOpen.select){\n          return leaveContent(children)\n        }\n      }\n      else {\n        // open 一个页面\n        const lastHistoryItem = history[history.length-1]\n        if (index == lastHistoryItem.select||path == lastHistoryItem.select){\n          return enterContent(children)\n        }\n      }\n    }\n    \n    return normalContent(children, focusStyle, focus)\n  }\n}\n\nclass RouterClass extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: this.props.selectData || {},\n      multiple: false,\n      isBack: false\n    }\n\n    const initHistory = {\n      select: this.state.select,\n      selectData: this.state.selectData,\n      multiple: false,\n    }\n    this.keyPrefix = Aotoo.uniqueId('router_')\n    this.state.history = [initHistory]\n    this.prepaireData = this.prepaireData.bind(this)\n    this.getContent = this.getContent.bind(this)\n    this.getMyRealContent = this.getMyRealContent.bind(this)\n    this.getRealContent = this.getRealContent.bind(this)\n    this.getPageX = this.getPageX.bind(this)\n  }\n\n  componentWillMount() {\n    const that = this\n    let timmer\n    this.prepaireData(this.state)\n    if (Platform.OS  == 'android') {\n      BackHandler.addEventListener('hardwareBackPress', function(){\n        const history = that.saxer.get().History\n        if (timmer) {\n          const curTime = new Date().getTime()\n          if (curTime - timmer < 2000) {\n            return false\n          } else {\n            timmer = curTime\n            that.props.router.close()\n            return true\n          }\n        } else {\n          timmer = new Date().getTime()\n        }\n        return true\n      })\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState){\n    this.prepaireData(nextState)\n  }\n\n  prepaireData(){\n    const that = this\n    const props = this.props\n    const state = this.state\n    var   propsItemStyle = props.style ? props.style : {}\n\n    const contentData = state.data.map( (item, ii) => {\n      // 准备内容数据\n      return {\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        content: item.content,\n        style: item.style\n      }\n    })\n\n    this.saxer.append({\n      ContentData: contentData\n    })\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    let selectContent\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content\n        }\n      } else {\n        if (item.index == select || item.path == select) {\n          selectContent = item.content\n        }\n      }\n    })\n    return selectContent\n  }\n\n  getMyRealContent(id, data){\n    try {\n      let   content = this.getContent(id)\n      const router = this.props.router||{}\n      const ctx = {\n        router: router\n      }\n\n      if (typeof content == 'function') {\n        const result = content.call(ctx, data||this.state.selectData)\n        if (React.isValidElement(result)) return result\n        content = result\n      }\n\n      if (typeof content == 'object') {\n        if (content.enter) {\n          if (typeof content.enter == 'function') return content.enter.call(ctx, data||this.state.selectData)\n        } else {\n          if (content.main) {\n            return content.main.call(ctx, data||this.state.selectData)\n          }\n        }\n      }\n      if ( React.isValidElement(content)) return content\n      else {\n        throw '没有返回jsx对象'\n      }\n    } catch (error) {\n      alert('路由页必须返回JSX')\n    }\n  }\n\n  getRealContent(id, data){\n    if (!id) id = this.state.select\n    let historyContent = this.saxer.data['RealContent']\n    if (!historyContent) {\n      historyContent = {}\n      this.saxer.data['RealContent'] = {}\n    }\n    if (historyContent[id]) {\n      return historyContent[id]\n    } else {\n      const content = this.getMyRealContent(id, data)\n      this.saxer.data['RealContent'][id] = content\n      return content\n    }\n  }\n  \n  // getPage(){\n  //   const isBack = this.state.isBack\n  //   const isMultiple = this.state.multiple\n  //   const history = this.state.history\n  //   const saxer = this.saxer\n  //   const select = this.state.select\n  //   const selectData = this.state.selectData\n  //   var animContent = ''\n  //   var baseContentAry = []\n  //   var baseContent = []\n  //   var contents = []\n  //   const keyPrefix = this.keyPrefix\n\n  //   if (isMultiple) {\n  //     // const reverseHistory = Aotoo.cloneDeep(history).reverse()\n  //     const tmpHistory = JSON.parse(JSON.stringify(history))\n  //     const reverseHistory = tmpHistory.reverse()\n  //     var count = 0\n  //     reverseHistory.forEach( (item, ii) => {\n  //       if (count == 0) {\n  //         if (ii==0) {\n  //           if (isBack) {\n  //             if (item.multiple) baseContentAry.unshift(item)\n  //             else {\n  //               baseContentAry.unshift(item)\n  //               count = 1\n  //             }\n  //           }\n  //         } else {\n  //           if (item.multiple) {\n  //             baseContentAry.unshift(item)\n  //           } else {\n  //             baseContentAry.unshift(item)\n  //             count = 1\n  //           }\n  //         }\n  //       }\n  //     })\n\n  //     if (!isBack) {\n  //       animContent = this.enterContent()\n  //     } else {\n  //       animContent = this.leaveContent()\n  //     }\n\n  //     baseContent = baseContentAry.map( (item, ii) => {\n  //       const _key = keyPrefix+'_'+ii\n  //       const originJsx = this.getRealContent(item.select, item.selectData)\n  //       return React.cloneElement(originJsx, {key: _key})\n  //     })\n\n  //     baseContent.push(React.cloneElement(animContent, {key: keyPrefix+'_'+'animate'}))\n  //     return baseContent\n  //   }\n  //   else {\n  //     return this.getRealContent()\n  //   }\n  // }\n\n  getPageX(){\n    const isBack = this.state.isBack\n    const isMultiple = this.state.multiple\n    const history = this.state.history\n    const saxer = this.saxer\n    const select = this.state.select\n    const selectData = this.state.selectData\n    var animContent = ''\n    var baseContentAry = []\n    var baseContent = []\n\n    const keyPrefix = this.keyPrefix\n    const contents = this.saxer.get().ContentData\n    const _props = {\n      isBack, isMultiple, history, saxer, select, selectData\n    }\n\n    // 同步history到saxer中\n    this.saxer.append({\n      History: this.state.history\n    })\n\n    return contents.map( (item, ii) => \n      <RouterPageView \n        key={keyPrefix+'_'+ii} \n        ctx={this}\n        focus={ ()=>item.index==select||item.path==select }\n        index={item.index}\n        path={item.path}\n        {..._props}\n      >\n        {this.getRealContent(item.path)}\n      </RouterPageView>\n    )\n  }\n\n  render(){\n    const curPage = this.getPageX()\n    const sty = this.props.style || styles.routerContainer\n    return (\n      <View style={sty}>\n        {curPage}\n      </View>\n    )\n  }\n}\n\nfunction getPrev(state, history){\n  if (history.length) {\n    var prev = history[history.length-1]\n    if (state.select == prev.select) {\n      history.pop()\n      return getPrev(state, history)\n    } else {\n      return prev\n    }\n  }\n}\n\nconst Actions = {\n  GOTO: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = false\n    state.select = opts.select\n    state.selectData = opts.selectData\n    state.history.push({\n      select: opts.select,\n      selectData: opts.selectData,\n      multiple: false\n    })\n    return state\n  },\n\n  BACK: function(ostate, opts={}){\n    let state = this.curState\n    state.isBack = true\n    state.multiple = false\n    const prev = getPrev(state, state.history)\n    if (prev) {\n      state.select = prev.select\n      state.selectData = opts.selectData || prev.selectData\n    } else {\n      state.select = ostate.select\n      state.selectData = ostate.selectData\n    }\n    return state\n  },\n\n  OPEN: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = true\n    var prev = state.history[state.history.length-1]\n    if (state.select != opts.select) {\n      state.select = prev.select\n      state.selectData = prev.selectData\n      state.history.push({\n        select: opts.select,\n        selectData: opts.selectData,\n        multiple: true\n      })\n    }\n    return state\n  },\n\n  CLOSE: function(ostate, opts={}, ctx){\n    var state = this.curState\n    state.isBack = true\n    state.multiple = true\n    var prev = state.history.pop()\n    if (prev) {\n      if (prev.multiple) {\n        ctx.saxer.append({\n          LastOpen: prev\n        })\n        const prev2 = state.history[state.history.length-1]\n        state.select = prev2.select\n        state.selectData = opts.selectData || prev2.selectData\n      } else {\n        state.multiple = false\n        state.history.push(prev)\n        prev = getPrev(state, state.history)\n        if (prev) {\n          state.select = prev.select\n          state.selectData = opts.selectData || prev.selectData\n        } else {\n          state.select = ostate.select\n          state.selectData = ostate.selectData\n        }\n      }\n    }\n    return state\n  }\n}\n\n// function convTimestamp(time){\n//   var arr = time.split(/[- :]/),\n//       _date = new Date(arr[0], arr[1]-1, arr[2], arr[3], arr[4], arr[5]),\n//       timeStr = Date.parse(_date);\n//   return timeStr\n// }\n\nmodule.exports = function router(opts={}, sty){\n  if (!opts.props) opts.props = {}\n  const Router = Aotoo(RouterClass, Actions)\n  const extendAction = {\n    \"$goto\": function(rot, data){\n      this.dispatch('GOTO', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    goto: function(rot, data){\n      this.$goto(rot, data)\n    }.bind(Router),\n\n    goback: function(data){\n      this.dispatch('BACK', {\n        selectData: data\n      })\n    }.bind(Router),\n\n    open: function(rot, data){\n      this.dispatch('OPEN', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    close: function(data){\n      this.dispatch('CLOSE', {\n        selectData: data\n      })\n    }.bind(Router),\n  }\n  Router.extend(extendAction)\n  opts.props.router = extendAction\n  Router.setConfig(opts)\n  return Router\n}\n"]}