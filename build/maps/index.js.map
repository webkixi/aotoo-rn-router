{"version":3,"sources":["index.js"],"names":["Animatable","get","width","height","styles","routerContainer","backgroundColor","routerPage","position","empty","left","animateStyles","enter","leave","enterContent","cnt","from","translateX","to","leaveContent","normalContent","style","focus","myAnimation","RouterPageView","props","isBack","isMultiple","history","saxer","select","selectData","index","path","ctx","children","focusStyle","lastOpen","LastOpen","lastHistoryItem","length","React","PureComponent","RouterClass","state","data","start","multiple","initHistory","keyPrefix","Aotoo","uniqueId","prepaireData","bind","getContent","getMyRealContent","getRealContent","getPageX","that","nextProps","nextState","propsItemStyle","contentData","map","item","ii","title","idf","parent","attr","content","append","ContentData","id","contents","selectContent","forEach","router","MyRouter","result","call","isValidElement","main","error","alert","historyContent","animContent","baseContentAry","baseContent","_props","History","curPage","sty","Component","getPrev","prev","pop","Actions","GOTO","ostate","opts","curState","push","BACK","OPEN","CLOSE","prev2","defaultConfig","duration","module","exports","merge","Router","timmer","Date","getTime","extendAction","rot","dispatch","goto","$goto","goback","open","close","androidBackButton","toast","myToast","show","info","console","log","curTime","extend","setConfig"],"mappings":"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","file":"../index.js","sourcesContent":["import { Animated, Button, Platform, BackHandler, StyleSheet, Text, View, Dimensions } from 'react-native'\nimport * as Animatable from 'react-native-animatable'\nconst {width, height} = Dimensions.get('window');\n\nconst styles = {\n  routerContainer: {\n    width: width,\n    height: height,\n    backgroundColor: '#fff',\n  },\n  routerPage: {\n    position: 'absolute',\n  },\n  empty: {\n    position: 'absolute',\n    left: width\n  },\n}\n\nconst animateStyles = {\n  enter: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  },\n\n  leave: {\n    width: width,\n    height: height,\n    position: 'absolute',\n  }\n}\n\n\nfunction enterContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.enter}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 500\n        },\n        to: {\n          translateX: 0\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction leaveContent(cnt){\n  return (\n    <Animatable.View\n      style={animateStyles.leave}\n      useNativeDriver={true}\n      duration={400}\n      animation={{\n        from: {\n          translateX: 0\n        },\n        to: {\n          translateX: 500\n        }\n      }}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nfunction normalContent(cnt, style, focus){\n  const myAnimation = focus ? 'fadeIn' : {\n    from: {\n      translateX: 1000\n    },\n    to: {\n      translateX: 1000\n    }\n  }\n  return (\n    <Animatable.View\n      useNativeDriver={true}\n      style={style}\n      duration={300}\n      animation={'fadeIn'}\n    >\n      {cnt}\n    </Animatable.View>\n  )\n}\n\nclass RouterPageView extends React.PureComponent {\n  render(){\n    const focus = this.props.focus()\n    const {isBack, isMultiple, history, saxer, select, selectData, index, path, ctx, children} = this.props\n    let focusStyle = focus ? styles.routerPage : styles.empty\n    if (isMultiple) {\n      if (isBack) {\n        // 关闭open的页面\n        const lastOpen = ctx.saxer.get().LastOpen\n        if (lastOpen && (index == lastOpen.select || path == lastOpen.select)){\n          return leaveContent(children)\n        }\n      }\n      else {\n        // open 一个页面\n        const lastHistoryItem = history[history.length-1]\n        if (index == lastHistoryItem.select||path == lastHistoryItem.select){\n          return enterContent(children)\n        }\n      }\n    }\n    \n    return normalContent(children, focusStyle, focus)\n  }\n}\n\nclass RouterClass extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: this.props.selectData || {},\n      multiple: false,\n      isBack: false\n    }\n\n    const initHistory = {\n      select: this.state.select,\n      selectData: this.state.selectData,\n      multiple: false,\n    }\n    this.keyPrefix = Aotoo.uniqueId('router_')\n    this.state.history = [initHistory]\n    this.prepaireData = this.prepaireData.bind(this)\n    this.getContent = this.getContent.bind(this)\n    this.getMyRealContent = this.getMyRealContent.bind(this)\n    this.getRealContent = this.getRealContent.bind(this)\n    this.getPageX = this.getPageX.bind(this)\n  }\n\n  componentWillMount() {\n    const that = this\n    this.prepaireData(this.state)\n  }\n\n  componentWillUpdate(nextProps, nextState){\n    this.prepaireData(nextState)\n  }\n\n  prepaireData(){\n    const that = this\n    const props = this.props\n    const state = this.state\n    var   propsItemStyle = props.style ? props.style : {}\n\n    const contentData = state.data.map( (item, ii) => {\n      // 准备内容数据\n      return {\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        content: item.content,\n        style: item.style\n      }\n    })\n\n    this.saxer.append({\n      ContentData: contentData\n    })\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    let selectContent\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content\n        }\n      } else {\n        if (item.index == select || item.path == select) {\n          selectContent = item.content\n        }\n      }\n    })\n    return selectContent\n  }\n\n  getMyRealContent(id, data){\n    try {\n      let   content = this.getContent(id)\n      // const router = this.props.router||{}\n      const router = this.saxer.get().MyRouter||{}\n      const ctx = {\n        router: router\n      }\n\n      if (typeof content == 'function') {\n        const result = content.call(ctx, data||this.state.selectData)\n        if (React.isValidElement(result)) return result\n        content = result\n      }\n\n      if (typeof content == 'object') {\n        if (content.enter) {\n          if (typeof content.enter == 'function') return content.enter.call(ctx, data||this.state.selectData)\n        } else {\n          if (content.main) {\n            return content.main.call(ctx, data||this.state.selectData)\n          }\n        }\n      }\n      if ( React.isValidElement(content)) return content\n      else {\n        throw '没有返回jsx对象'\n      }\n    } catch (error) {\n      alert('路由页必须返回JSX')\n    }\n  }\n\n  getRealContent(id, data){\n    if (!id) id = this.state.select\n    let historyContent = this.saxer.data['RealContent']\n    if (!historyContent) {\n      historyContent = {}\n      this.saxer.data['RealContent'] = {}\n    }\n    if (historyContent[id]) {\n      return historyContent[id]\n    } else {\n      const content = this.getMyRealContent(id, data)\n      this.saxer.data['RealContent'][id] = content\n      return content\n    }\n  }\n  \n  // getPage(){\n  //   const isBack = this.state.isBack\n  //   const isMultiple = this.state.multiple\n  //   const history = this.state.history\n  //   const saxer = this.saxer\n  //   const select = this.state.select\n  //   const selectData = this.state.selectData\n  //   var animContent = ''\n  //   var baseContentAry = []\n  //   var baseContent = []\n  //   var contents = []\n  //   const keyPrefix = this.keyPrefix\n\n  //   if (isMultiple) {\n  //     // const reverseHistory = Aotoo.cloneDeep(history).reverse()\n  //     const tmpHistory = JSON.parse(JSON.stringify(history))\n  //     const reverseHistory = tmpHistory.reverse()\n  //     var count = 0\n  //     reverseHistory.forEach( (item, ii) => {\n  //       if (count == 0) {\n  //         if (ii==0) {\n  //           if (isBack) {\n  //             if (item.multiple) baseContentAry.unshift(item)\n  //             else {\n  //               baseContentAry.unshift(item)\n  //               count = 1\n  //             }\n  //           }\n  //         } else {\n  //           if (item.multiple) {\n  //             baseContentAry.unshift(item)\n  //           } else {\n  //             baseContentAry.unshift(item)\n  //             count = 1\n  //           }\n  //         }\n  //       }\n  //     })\n\n  //     if (!isBack) {\n  //       animContent = this.enterContent()\n  //     } else {\n  //       animContent = this.leaveContent()\n  //     }\n\n  //     baseContent = baseContentAry.map( (item, ii) => {\n  //       const _key = keyPrefix+'_'+ii\n  //       const originJsx = this.getRealContent(item.select, item.selectData)\n  //       return React.cloneElement(originJsx, {key: _key})\n  //     })\n\n  //     baseContent.push(React.cloneElement(animContent, {key: keyPrefix+'_'+'animate'}))\n  //     return baseContent\n  //   }\n  //   else {\n  //     return this.getRealContent()\n  //   }\n  // }\n\n  getPageX(){\n    const isBack = this.state.isBack\n    const isMultiple = this.state.multiple\n    const history = this.state.history\n    const saxer = this.saxer\n    const select = this.state.select\n    const selectData = this.state.selectData\n    var animContent = ''\n    var baseContentAry = []\n    var baseContent = []\n\n    const keyPrefix = this.keyPrefix\n    const contents = this.saxer.get().ContentData\n    const _props = {\n      isBack, isMultiple, history, saxer, select, selectData\n    }\n\n    // 同步history到saxer中\n    this.saxer.append({\n      History: this.state.history\n    })\n\n    return contents.map( (item, ii) => \n      <RouterPageView \n        key={keyPrefix+'_'+ii} \n        ctx={this}\n        focus={ ()=>item.index==select||item.path==select }\n        index={item.index}\n        path={item.path}\n        {..._props}\n      >\n        {this.getRealContent(item.path)}\n      </RouterPageView>\n    )\n  }\n\n  render(){\n    const curPage = this.getPageX()\n    const sty = this.props.style || styles.routerContainer\n    return (\n      <View style={sty}>\n        {curPage}\n        {this.props.children}\n      </View>\n    )\n  }\n}\n\nfunction getPrev(state, history){\n  if (history.length) {\n    var prev = history[history.length-1]\n    if (state.select == prev.select) {\n      history.pop()\n      return getPrev(state, history)\n    } else {\n      return prev\n    }\n  }\n}\n\nconst Actions = {\n  GOTO: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = false\n    state.select = opts.select\n    state.selectData = opts.selectData\n    state.history.push({\n      select: opts.select,\n      selectData: opts.selectData,\n      multiple: false\n    })\n    return state\n  },\n\n  BACK: function(ostate, opts={}){\n    let state = this.curState\n    state.isBack = true\n    state.multiple = false\n    const prev = getPrev(state, state.history)\n    if (prev) {\n      state.select = prev.select\n      state.selectData = opts.selectData || prev.selectData\n    } else {\n      state.select = ostate.select\n      state.selectData = ostate.selectData\n    }\n    return state\n  },\n\n  OPEN: function(ostate, opts={}){\n    var state = this.curState\n    state.isBack = false\n    state.multiple = true\n    var prev = state.history[state.history.length-1]\n    if (state.select != opts.select) {\n      state.select = prev.select\n      state.selectData = prev.selectData\n      state.history.push({\n        select: opts.select,\n        selectData: opts.selectData,\n        multiple: true\n      })\n    }\n    return state\n  },\n\n  CLOSE: function(ostate, opts={}, ctx){\n    var state = this.curState\n    state.isBack = true\n    state.multiple = true\n    var prev = state.history.pop()\n    if (prev) {\n      if (prev.multiple) {\n        ctx.saxer.append({\n          LastOpen: prev\n        })\n        const prev2 = state.history[state.history.length-1]\n        state.select = prev2.select\n        state.selectData = opts.selectData || prev2.selectData\n      } else {\n        state.multiple = false\n        state.history.push(prev)\n        prev = getPrev(state, state.history)\n        if (prev) {\n          state.select = prev.select\n          state.selectData = opts.selectData || prev.selectData\n        } else {\n          state.select = ostate.select\n          state.selectData = ostate.selectData\n        }\n      }\n    }\n    return state\n  }\n}\n\nvar defaultConfig = {\n  props: {\n    data: [],\n    select: 0,\n    selectData: {},\n    router: {},\n    duration: 1200\n  }\n}\nmodule.exports = function router(opts={}, sty){\n  opts = Aotoo.merge({}, defaultConfig, opts)\n  // if (!opts.props) opts.props = {}\n  const Router = Aotoo(RouterClass, Actions)\n  Router.timmer = new Date().getTime()\n  const extendAction = {\n    \"$goto\": function(rot, data){\n      this.dispatch('GOTO', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    goto: function(rot, data){\n      this.$goto(rot, data)\n    }.bind(Router),\n\n    goback: function(data){\n      this.dispatch('BACK', {\n        selectData: data\n      })\n    }.bind(Router),\n\n    open: function(rot, data){\n      this.dispatch('OPEN', {\n        select: rot,\n        selectData: data\n      })\n    }.bind(Router),\n\n    close: function(data){\n      this.dispatch('CLOSE', {\n        selectData: data\n      })\n    }.bind(Router),\n\n    androidBackButton: function(toast){\n      let myToast = { show: function(info){ console.log(info); } }\n      if (toast && toast.show) { myToast = toast }\n\n      const history = this.saxer.get().History\n      const curTime = new Date().getTime()\n      if (history.length<2) {\n        myToast.show('再按一次退出')\n        if (curTime - this.timmer < 1500) {\n          return false\n        } else {\n          this.timmer = curTime\n          return true\n        }\n      } else {\n        this.timmer = curTime\n        this.close()\n        return true\n      }\n    }.bind(Router),\n  }\n  Router.extend(extendAction)\n  Router.saxer.append({\n    'MyRouter': extendAction\n  })\n  // opts.props.router = extendAction\n  Router.setConfig(opts)\n  return Router\n}"]}